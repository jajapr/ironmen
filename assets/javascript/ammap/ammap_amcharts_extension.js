AmCharts.AmMap=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(t){this.cname="AmMap",this.type="map",this.theme=t,this.version="3.13.1",this.svgNotSupported="This browser doesn't support SVG. Use Chrome, Firefox, Internet Explorer 9 or later.",this.createEvents("rollOverMapObject","rollOutMapObject","clickMapObject","selectedObjectChanged","homeButtonClicked","zoomCompleted","dragCompleted","positionChanged","writeDevInfo","click"),this.zoomDuration=1,this.zoomControl=new AmCharts.ZoomControl(t),this.fitMapToContainer=!0,this.mouseWheelZoomEnabled=this.backgroundZoomsToTop=!1,this.allowClickOnSelectedObject=this.useHandCursorOnClickableOjects=this.showBalloonOnSelectedObject=!0,this.showObjectsAfterZoom=this.wheelBusy=!1,this.zoomOnDoubleClick=this.useObjectColorForBalloon=!0,this.allowMultipleDescriptionWindows=!1,this.dragMap=this.centerMap=this.linesAboveImages=!0,this.colorSteps=5,this.showAreasInList=!0,this.showLinesInList=this.showImagesInList=!1,this.areasProcessor=new AmCharts.AreasProcessor(this),this.areasSettings=new AmCharts.AreasSettings(t),this.imagesProcessor=new AmCharts.ImagesProcessor(this),this.imagesSettings=new AmCharts.ImagesSettings(t),this.linesProcessor=new AmCharts.LinesProcessor(this),this.linesSettings=new AmCharts.LinesSettings(t),this.showDescriptionOnHover=!1,AmCharts.AmMap.base.construct.call(this,t),this.creditsPosition="bottom-left",this.product="ammap",this.areasClasses={},AmCharts.applyTheme(this,t,this.cname)},initChart:function(){this.zoomInstantly=!0;var t=this.container;if(this.sizeChanged&&AmCharts.hasSVG&&this.chartCreated){this.freeLabelsSet&&this.freeLabelsSet.remove(),this.freeLabelsSet=t.set(),this.container.setSize(this.realWidth,this.realHeight),this.resizeMap(),this.drawBackground(),this.redrawLabels(),this.drawTitles(),this.processObjects(),this.rescaleObjects(),t=this.container,this.zoomControl.init(this,t),this.drawBg();var e=this.smallMap;e&&e.init(this,t),(e=this.valueLegend)&&e.init(this,t),this.sizeChanged=!1,this.zoomToLongLat(this.zLevelTemp,this.zLongTemp,this.zLatTemp,!0),this.previousWidth=this.realWidth,this.previousHeight=this.realHeight,this.updateSmallMap(),this.linkSet.toFront()}else AmCharts.AmMap.base.initChart.call(this),AmCharts.hasSVG?(this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,t=this.legend)&&(t.position="absolute",t.invalidateSize()),this.createDescriptionsDiv(),this.svgAreas=[],this.svgAreasById={},this.drawChart()):(document.createTextNode(this.svgNotSupported),this.chartDiv.style.textAlign="",this.chartDiv.setAttribute("class","ammapAlert"),this.chartDiv.innerHTML=this.svgNotSupported,this.fire("failed",{type:"failed",chart:this}),clearInterval(this.interval))},invalidateSize:function(){var t=this.zoomLongitude();isNaN(t)||(this.zLongTemp=t),t=this.zoomLatitude(),isNaN(t)||(this.zLatTemp=t),t=this.zoomLevel(),isNaN(t)||(this.zLevelTemp=t),AmCharts.AmMap.base.invalidateSize.call(this)},handleWheelReal:function(t){if(!this.wheelBusy){this.stopAnimation();var e=this.zoomLevel(),i=this.zoomControl,s=i.zoomFactor;this.wheelBusy=!0,t=AmCharts.fitToBounds(t>0?e*s:e/s,i.minZoomLevel,i.maxZoomLevel),s=this.mouseX/this.mapWidth,i=this.mouseY/this.mapHeight,s=(this.zoomX()-s)*(t/e)+s,e=(this.zoomY()-i)*(t/e)+i,this.zoomTo(t,s,e)}},addLegend:function(t,e){return t.position="absolute",t.autoMargins=!1,t.valueWidth=0,t.switchable=!1,AmCharts.AmMap.base.addLegend.call(this,t,e),void 0==t.enabled&&(t.enabled=!0),t},handleLegendEvent:function(){},createDescriptionsDiv:function(){if(!this.descriptionsDiv){var t=document.createElement("div"),e=t.style;e.position="absolute",e.left="0px",e.top="0px",this.descriptionsDiv=t}this.containerDiv.appendChild(this.descriptionsDiv)},drawChart:function(){AmCharts.AmMap.base.drawChart.call(this);var t=this.dataProvider;this.dataProvider=t=AmCharts.extend(t,new AmCharts.MapData,!0),this.areasSettings=AmCharts.processObject(this.areasSettings,AmCharts.AreasSettings,this.theme),this.imagesSettings=AmCharts.processObject(this.imagesSettings,AmCharts.ImagesSettings,this.theme),this.linesSettings=AmCharts.processObject(this.linesSettings,AmCharts.LinesSettings,this.theme);var e=this.container;this.mapContainer&&this.mapContainer.remove(),this.mapContainer=e.set(),this.graphsSet.push(this.mapContainer);var i;t.map&&(i=AmCharts.maps[t.map]),t.mapVar&&(i=t.mapVar),i?(this.svgData=i.svg,this.getBounds(),this.buildEverything()):(t=t.mapURL)&&this.loadXml(t),this.balloonsSet.toFront()},drawBg:function(){var t=this;t.background.click(function(){t.handleBackgroundClick()})},buildEverything:function(){var t=this;if(0<t.realWidth&&0<t.realHeight){var e=t.container;t.zoomControl=AmCharts.processObject(t.zoomControl,AmCharts.ZoomControl,t.theme),t.zoomControl.init(this,e),t.drawBg(),t.buildSVGMap();var i=t.smallMap;i&&(t.smallMap=AmCharts.processObject(t.smallMap,AmCharts.SmallMap,t.theme),i=t.smallMap,i.init(t,e)),i=t.dataProvider,isNaN(i.zoomX)&&isNaN(i.zoomY)&&isNaN(i.zoomLatitude)&&isNaN(i.zoomLongitude)&&(t.centerMap?(i.zoomLatitude=t.coordinateToLatitude(t.mapHeight/2),i.zoomLongitude=t.coordinateToLongitude(t.mapWidth/2)):(i.zoomX=0,i.zoomY=0),t.zoomInstantly=!0),t.selectObject(t.dataProvider),t.processAreas(),(i=t.valueLegend)&&(i=AmCharts.processObject(i,AmCharts.ValueLegend,t.theme),t.valueLegend=i,i.init(t,e)),t.objectList&&(t.objectList=AmCharts.processObject(t.objectList,AmCharts.ObjectList),e=t.objectList)&&(t.clearObjectList(),e.init(t)),clearInterval(t.mapInterval),t.mapInterval=setInterval(function(){t.update.call(t)},AmCharts.updateRate),t.dispDUpd(),t.linkSet.toFront(),t.chartCreated=!0}else t.cleanChart()},hideGroup:function(t){this.showHideGroup(t,!1)},showGroup:function(t){this.showHideGroup(t,!0)},showHideGroup:function(t,e){this.showHideReal(this.imagesProcessor.allObjects,t,e),this.showHideReal(this.areasProcessor.allObjects,t,e),this.showHideReal(this.linesProcessor.allObjects,t,e)},showHideReal:function(t,e,i){var s;for(s=0;s<t.length;s++){var o=t[s];if(o.groupId==e){var a=o.displayObject;a&&(i?(o.hidden=!1,a.show()):(o.hidden=!0,a.hide()))}}},update:function(){this.zoomControl.update()},animateMap:function(){var t=this;t.totalFrames=1e3*t.zoomDuration/AmCharts.updateRate,t.totalFrames+=1,t.frame=0,t.tweenPercent=0,setTimeout(function(){t.updateSize.call(t)},AmCharts.updateRate)},updateSize:function(){var t=this,e=t.totalFrames;t.preventHover=!0,t.frame<=e?(t.frame++,e=AmCharts.easeOutSine(0,t.frame,0,1,e),e>=1?(e=1,t.preventHover=!1,t.wheelBusy=!1):setTimeout(function(){t.updateSize.call(t)},AmCharts.updateRate),e>.8&&(t.preventHover=!1)):(e=1,t.preventHover=!1,t.wheelBusy=!1),t.tweenPercent=e,t.rescaleMapAndObjects()},rescaleMapAndObjects:function(){var t=this.initialScale,e=this.initialX,i=this.initialY,s=this.tweenPercent,t=t+(this.finalScale-t)*s;if(this.mapContainer.translate(e+(this.finalX-e)*s,i+(this.finalY-i)*s,t),this.areasSettings.adjustOutlineThickness)for(e=this.dataProvider.areas,i=0;i<e.length;i++){var o=e[i],a=o.displayObject;a&&a.setAttr("stroke-width",o.outlineThicknessReal/t)}this.rescaleObjects(),this.positionChanged(),this.updateSmallMap(),1==s&&(s={type:"zoomCompleted",chart:this},this.fire(s.type,s))},updateSmallMap:function(){this.smallMap&&this.smallMap.update()},rescaleObjects:function(){var t,e=this.mapContainer.scale,i=this.imagesProcessor.objectsToResize;for(t=0;t<i.length;t++){var s=i[t].image;s.translate(s.x,s.y,i[t].scale/e,!0)}if(i=this.linesProcessor,s=i.linesToResize)for(t=0;t<s.length;t++){var o=s[t];o.line.setAttr("stroke-width",o.thickness/e)}for(i=i.objectsToResize,t=0;t<i.length;t++)s=i[t],s.translate(s.x,s.y,1/e)},handleTouchStart:function(t){this.handleMouseMove(t),this.handleMouseDown(t)},handleTouchEnd:function(t){this.previousDistance=0/0,this.handleReleaseOutside(t)},handleMouseDown:function(t){if(AmCharts.resetMouseOver(),this.mouseIsOver=!0,t&&this.mouseIsOver&&t.preventDefault&&this.panEventsEnabled&&t.preventDefault(),this.chartCreated&&!this.preventHover&&(this.dragMap&&(this.stopAnimation(),this.isDragging=!0,this.mapContainerClickX=this.mapContainer.x,this.mapContainerClickY=this.mapContainer.y),t||(t=window.event),t.shiftKey&&!0===this.developerMode&&this.getDevInfo(),t&&t.touches)){var e=this.mouseX,i=this.mouseY,s=t.touches.item(1);s&&(t=s.pageX-AmCharts.findPosX(this.div),s=s.pageY-AmCharts.findPosY(this.div),this.middleXP=(e+(t-e)/2)/this.realWidth,this.middleYP=(i+(s-i)/2)/this.realHeight)}},stopDrag:function(){this.isDragging=!1},handleReleaseOutside:function(){if(AmCharts.isModern&&!this.preventHover){this.stopDrag();var t=this.zoomControl;t&&t.draggerUp(),this.mapWasDragged=!1;var t=this.mapContainer,e=this.mapContainerClickX,i=this.mapContainerClickY;isNaN(e)||isNaN(i)||!(2<Math.abs(t.x-e)||Math.abs(t.y-i))||(this.mapWasDragged=!0,t={type:"dragCompleted",zoomX:this.zoomX(),zoomY:this.zoomY(),zoomLevel:this.zoomLevel(),chart:this},this.fire(t.type,t)),!this.mouseIsOver||this.mapWasDragged||this.skipClick||(t={type:"click",x:this.mouseX,y:this.mouseY,chart:this},this.fire(t.type,t),this.skipClick=!1),this.mapContainerClickY=this.mapContainerClickX=0/0,this.objectWasClicked=!1,this.zoomOnDoubleClick&&this.mouseIsOver&&(t=(new Date).getTime(),200>t-this.previousClickTime&&20<t-this.previousClickTime&&this.doDoubleClickZoom(),this.previousClickTime=t)}},handleTouchMove:function(t){this.handleMouseMove(t)},resetPinch:function(){this.mapWasPinched=!1},handleMouseMove:function(t){var e=this;AmCharts.AmMap.base.handleMouseMove.call(e,t),e.panEventsEnabled&&e.mouseIsOver&&t&&t.preventDefault&&t.preventDefault();var i=e.previuosMouseX,s=e.previuosMouseY,o=e.mouseX,a=e.mouseY,r=e.zoomControl;if(isNaN(i)&&(i=o),isNaN(s)&&(s=a),e.mouse2X=0/0,e.mouse2Y=0/0,t&&t.touches&&(t=t.touches.item(1))&&(e.mouse2X=t.pageX-AmCharts.findPosX(e.div),e.mouse2Y=t.pageY-AmCharts.findPosY(e.div)),t=e.mapContainer){var n=e.mouse2X,h=e.mouse2Y;e.pinchTO&&clearTimeout(e.pinchTO),e.pinchTO=setTimeout(function(){e.resetPinch.call(e)},1e3);var l=e.realHeight,c=e.realWidth,d=e.mapWidth,m=e.mapHeight;if(!isNaN(n)){e.stopDrag();var n=Math.sqrt(Math.pow(n-o,2)+Math.pow(h-a,2)),u=e.previousDistance,h=Math.max(e.realWidth,e.realHeight);if(5>Math.abs(u-n)&&(e.isDragging=!0),!isNaN(u)){var p=5*Math.abs(u-n)/h,h=t.scale,h=AmCharts.fitToBounds(n>u?h+h*p:h-h*p,r.minZoomLevel,r.maxZoomLevel),r=e.zoomLevel(),g=e.middleXP,u=e.middleYP,p=l/m,v=c/d,g=(e.zoomX()-g*v)*(h/r)+g*v,u=(e.zoomY()-u*p)*(h/r)+u*p;.1<Math.abs(h-r)&&(e.zoomTo(h,g,u,!0),e.mapWasPinched=!0,clearTimeout(e.pinchTO))}e.previousDistance=n}n=t.scale,e.isDragging&&(e.hideBalloon(),e.positionChanged(),i=t.x+(o-i),s=t.y+(a-s),e.preventDragOut&&(m=-m*n+l/2,l/=2,i=AmCharts.fitToBounds(i,-d*n+c/2,c/2),s=AmCharts.fitToBounds(s,m,l)),t.translate(i,s,n),e.updateSmallMap()),e.previuosMouseX=o,e.previuosMouseY=a}},selectObject:function(t){var e=this;t||(t=e.dataProvider),t.isOver=!1;var i=t.linkToObject;"string"==typeof i&&(i=e.getObjectById(i)),t.useTargetsZoomValues&&i&&(t.zoomX=i.zoomX,t.zoomY=i.zoomY,t.zoomLatitude=i.zoomLatitude,t.zoomLongitude=i.zoomLongitude,t.zoomLevel=i.zoomLevel);var s=e.selectedObject;s&&e.returnInitialColor(s),e.selectedObject=t;var o,a=!1;if("MapArea"==t.objectType&&(t.autoZoomReal&&(a=!0),o=e.areasSettings.selectedOutlineColor),i&&!a&&("string"==typeof i&&(i=e.getObjectById(i)),isNaN(t.zoomLevel)&&isNaN(t.zoomX)&&isNaN(t.zoomY))){if(e.extendMapData(i))return;return void e.selectObject(i)}if(e.allowMultipleDescriptionWindows||e.closeAllDescriptions(),clearTimeout(e.selectedObjectTimeOut),clearTimeout(e.processObjectsTimeOut),i=e.zoomDuration,!a&&isNaN(t.zoomLevel)&&isNaN(t.zoomX)&&isNaN(t.zoomY)?(e.showDescriptionAndGetUrl(),e.processObjects()):(e.selectedObjectTimeOut=setTimeout(function(){e.showDescriptionAndGetUrl.call(e)},1e3*i+200),e.showObjectsAfterZoom?e.processObjectsTimeOut=setTimeout(function(){e.processObjects.call(e)},1e3*i+200):e.processObjects()),a=t.displayObject){if(t.bringForwardOnHover&&a.toFront(),!t.preserveOriginalAttributes){a.setAttr("stroke",t.outlineColorReal);var r=t.selectedColorReal;if(void 0!==r&&a.setAttr("fill",r),void 0!==o&&a.setAttr("stroke",o),"MapLine"==t.objectType){var n=t.lineSvg;n&&n.setAttr("stroke",r);var h=t.arrowSvg;h&&(h.setAttr("fill",r),h.setAttr("stroke",r))}var l=t.imageLabel;l&&(i=t.selectedLabelColorReal,void 0!==i&&l.setAttr("fill",i))}t.selectable||(a.setAttr("cursor","default"),l&&l.setAttr("cursor","default"))}else e.returnInitialColorReal(t);if(a=t.groupId)for(l=e.getGroupById(a),i=0;i<l.length;i++)h=l[i],h.isOver=!1,(a=h.displayObject)&&(n=h.selectedColorReal,void 0!==o&&a.setAttr("stroke",o),void 0!==n?a.setAttr("fill",n):e.returnInitialColor(h),"MapLine"==h.objectType&&((n=h.lineSvg)&&n.setAttr("stroke",r),h=h.arrowSvg)&&(h.setAttr("fill",r),h.setAttr("stroke",r)));e.zoomToSelectedObject(),s!=t&&(t={type:"selectedObjectChanged",chart:e},e.fire(t.type,t))},returnInitialColor:function(t,e){if(this.returnInitialColorReal(t),e&&(t.isFirst=!1),this.selectedObject.bringForwardOnHover){var i=this.selectedObject.displayObject;i&&i.toFront()}if(i=t.groupId){var s,i=this.getGroupById(i);for(s=0;s<i.length;s++)this.returnInitialColorReal(i[s]),e&&(i[s].isFirst=!1)}},closeAllDescriptions:function(){this.descriptionsDiv.innerHTML=""},returnInitialColorReal:function(t){t.isOver=!1;var e=t.displayObject;if(e){if(e.toPrevious(),"MapImage"==t.objectType){var i=t.tempScale;isNaN(i)||e.translate(e.x,e.y,i,!0),t.tempScale=0/0}if(i=t.colorReal,"MapLine"==t.objectType){var s=t.lineSvg;s&&s.setAttr("stroke",i),(s=t.arrowSvg)&&(s.setAttr("fill",i),s.setAttr("stroke",i))}t.showAsSelected&&(i=t.selectedColorReal),"bubble"==t.type&&(i=void 0),void 0!==i&&e.setAttr("fill",i),(s=t.image)&&s.setAttr("fill",i),e.setAttr("stroke",t.outlineColorReal),"MapArea"==t.objectType&&(i=1,this.areasSettings.adjustOutlineThickness&&(i=this.zoomLevel()),e.setAttr("fill-opacity",t.alphaReal),e.setAttr("stroke-opacity",t.outlineAlphaReal),e.setAttr("stroke-width",t.outlineThicknessReal/i)),(i=t.pattern)&&e.pattern(i,this.mapScale),(e=t.imageLabel)&&!t.labelInactive&&e.setAttr("fill",t.labelColorReal)}},zoomToRectangle:function(t,e,i,s){var o=this.realWidth,a=this.realHeight,r=this.mapSet.scale,n=this.zoomControl,o=AmCharts.fitToBounds(i/o>s/a?.8*o/(i*r):.8*a/(s*r),n.minZoomLevel,n.maxZoomLevel);this.zoomToMapXY(o,(t+i/2)*r,(e+s/2)*r)},zoomToLatLongRectangle:function(t,e,i,s){var o=this.dataProvider,a=this.zoomControl,r=Math.abs(i-t),n=Math.abs(e-s),h=Math.abs(o.rightLongitude-o.leftLongitude),o=Math.abs(o.topLatitude-o.bottomLatitude),a=AmCharts.fitToBounds(r/h>n/o?.8*h/r:.8*o/n,a.minZoomLevel,a.maxZoomLevel);this.zoomToLongLat(a,t+(i-t)/2,s+(e-s)/2)},getGroupById:function(t){var e=[];return this.getGroup(this.imagesProcessor.allObjects,t,e),this.getGroup(this.linesProcessor.allObjects,t,e),this.getGroup(this.areasProcessor.allObjects,t,e),e},zoomToGroup:function(t){t="object"==typeof t?t:this.getGroupById(t);var e,i,s,o,a;for(a=0;a<t.length;a++){var r=t[a].displayObject.getBBox(),n=r.y,h=r.y+r.height,l=r.x,r=r.x+r.width;(e>n||isNaN(e))&&(e=n),(h>o||isNaN(o))&&(o=h),(i>l||isNaN(i))&&(i=l),(r>s||isNaN(s))&&(s=r)}t=this.mapSet.getBBox(),i-=t.x,s-=t.x,o-=t.y,e-=t.y,this.zoomToRectangle(i,e,s-i,o-e)},getGroup:function(t,e,i){if(t){var s;for(s=0;s<t.length;s++){var o=t[s];o.groupId==e&&i.push(o)}}},zoomToStageXY:function(t,e,i,s){if(!this.objectWasClicked){var o=this.zoomControl;t=AmCharts.fitToBounds(t,o.minZoomLevel,o.maxZoomLevel),o=this.zoomLevel(),i=this.coordinateToLatitude((i-this.mapContainer.y)/o),e=this.coordinateToLongitude((e-this.mapContainer.x)/o),this.zoomToLongLat(t,e,i,s)}},zoomToLongLat:function(t,e,i,s){e=this.longitudeToCoordinate(e),i=this.latitudeToCoordinate(i),this.zoomToMapXY(t,e,i,s)},zoomToMapXY:function(t,e,i,s){var o=this.mapWidth,a=this.mapHeight;this.zoomTo(t,-(e/o)*t+this.realWidth/o/2,-(i/a)*t+this.realHeight/a/2,s)},zoomToObject:function(t){var e=t.zoomLatitude,i=t.zoomLongitude,s=t.zoomLevel,o=this.zoomInstantly,a=t.zoomX,r=t.zoomY,n=this.realWidth,h=this.realHeight;isNaN(s)||(isNaN(e)||isNaN(i)?this.zoomTo(s,a,r,o):this.zoomToLongLat(s,i,e,o)),this.zoomInstantly=!1,"MapImage"==t.objectType&&isNaN(t.zoomX)&&isNaN(t.zoomY)&&isNaN(t.zoomLatitude)&&isNaN(t.zoomLongitude)&&!isNaN(t.latitude)&&!isNaN(t.longitude)&&this.zoomToLongLat(t.zoomLevel,t.longitude,t.latitude),"MapArea"==t.objectType&&(a=t.displayObject.getBBox(),e=this.mapScale,i=a.x*e,s=a.y*e,o=a.width*e,a=a.height*e,n=t.autoZoomReal&&isNaN(t.zoomLevel)?o/n>a/h?.8*n/o:.8*h/a:t.zoomLevel,h=this.zoomControl,n=AmCharts.fitToBounds(n,h.minZoomLevel,h.maxZoomLevel),isNaN(t.zoomX)&&isNaN(t.zoomY)&&isNaN(t.zoomLatitude)&&isNaN(t.zoomLongitude)&&(t=this.mapSet.getBBox(),this.zoomToMapXY(n,-t.x*e+i+o/2,-t.y*e+s+a/2)))},zoomToSelectedObject:function(){this.zoomToObject(this.selectedObject)},zoomTo:function(t,e,i,s){var o=this.zoomControl;t=AmCharts.fitToBounds(t,o.minZoomLevel,o.maxZoomLevel),o=this.zoomLevel(),isNaN(e)&&(e=this.realWidth/this.mapWidth,e=(this.zoomX()-.5*e)*(t/o)+.5*e),isNaN(i)&&(i=this.realHeight/this.mapHeight,i=(this.zoomY()-.5*i)*(t/o)+.5*i),this.stopAnimation(),isNaN(t)||(o=this.mapContainer,this.initialX=o.x,this.initialY=o.y,this.initialScale=o.scale,this.finalX=this.mapWidth*e,this.finalY=this.mapHeight*i,this.finalScale=t,this.finalX!=this.initialX||this.finalY!=this.initialY||this.finalScale!=this.initialScale?s?(this.tweenPercent=1,this.rescaleMapAndObjects(),this.wheelBusy=!1):this.animateMap():this.wheelBusy=!1)},loadXml:function(t){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e.overrideMimeType&&e.overrideMimeType("text/xml"),e.open("GET",t,!1),e.send(),this.parseXMLObject(e.responseXML),this.svgData&&this.buildEverything()},stopAnimation:function(){this.frame=this.totalFrames},processObjects:function(){var t=this.container,e=this.stageImagesContainer;e&&e.remove(),this.stageImagesContainer=e=t.set(),this.trendLinesSet.push(e);var i=this.stageLinesContainer;i&&i.remove(),this.stageLinesContainer=i=t.set(),this.trendLinesSet.push(i);var s=this.mapImagesContainer;s&&s.remove(),this.mapImagesContainer=s=t.set(),this.mapContainer.push(s);var o=this.mapLinesContainer;o&&o.remove(),this.mapLinesContainer=o=t.set(),this.mapContainer.push(o),this.linesAboveImages?(s.toFront(),e.toFront(),o.toFront(),i.toFront()):(o.toFront(),i.toFront(),s.toFront(),e.toFront()),(t=this.selectedObject)&&(this.imagesProcessor.reset(),this.linesProcessor.reset(),this.linesAboveImages?(this.imagesProcessor.process(t),this.linesProcessor.process(t)):(this.linesProcessor.process(t),this.imagesProcessor.process(t))),this.rescaleObjects()},processAreas:function(){this.areasProcessor.process(this.dataProvider)},buildSVGMap:function(){var t=this.svgData.g.path,e=this.container,i=e.set();void 0===t.length&&(t=[t]);var s;for(s=0;s<t.length;s++){var o=t[s],a=o.d,r=o.title;if(o.titleTr&&(r=o.titleTr),a=e.path(a),a.id=o.id,this.areasSettings.preserveOriginalAttributes){a.customAttr={};for(var n in o)"d"!=n&&"id"!=n&&"title"!=n&&(a.customAttr[n]=o[n])}this.svgAreasById[o.id]={area:a,title:r,className:o.class},this.svgAreas.push(a),i.push(a)}this.mapSet=i,this.mapContainer.push(i),this.resizeMap()},addObjectEventListeners:function(t,e){var i=this;t.mouseup(function(t){i.clickMapObject(e,t)}).mouseover(function(t){i.rollOverMapObject(e,!0,t)}).mouseout(function(t){i.rollOutMapObject(e,t)}).touchend(function(t){i.clickMapObject(e,t)}).touchstart(function(t){i.rollOverMapObject(e,!0,t)})},checkIfSelected:function(t){var e=this.selectedObject;if(e==t)return!0;if(e=e.groupId){var i,e=this.getGroupById(e);for(i=0;i<e.length;i++)if(e[i]==t)return!0}return!1},clearMap:function(){this.chartDiv.innerHTML="",this.clearObjectList()},clearObjectList:function(){var t=this.objectList;t&&t.div&&(t.div.innerHTML="")},checkIfLast:function(t){if(t){var e=t.parentNode;if(e&&e.lastChild==t)return!0}return!1},showAsRolledOver:function(t){var e=t.displayObject;if(!t.showAsSelected&&e&&!t.isOver){e.node.onmouseout=function(){},e.node.onmouseover=function(){},e.node.onclick=function(){},!t.isFirst&&t.bringForwardOnHover&&(e.toFront(),t.isFirst=!0);var i,s=t.rollOverColorReal;if(t.preserveOriginalAttributes&&(s=void 0),void 0!=s&&("MapImage"==t.objectType?(i=t.image)&&i.setAttr("fill",s):"MapLine"==t.objectType?((i=t.lineSvg)&&i.setAttr("stroke",s),(i=t.arrowSvg)&&(i.setAttr("fill",s),i.setAttr("stroke",s))):e.setAttr("fill",s)),(s=t.imageLabel)&&!t.labelInactive&&(i=t.labelRollOverColorReal,void 0!=i&&s.setAttr("fill",i)),s=t.rollOverOutlineColorReal,void 0!=s&&("MapImage"==t.objectType?(i=t.image)&&i.setAttr("stroke",s):e.setAttr("stroke",s)),"MapArea"==t.objectType){s=this.areasSettings,i=t.rollOverAlphaReal,isNaN(i)||e.setAttr("fill-opacity",i),i=s.rollOverOutlineAlpha,isNaN(i)||e.setAttr("stroke-opacity",i),i=1,this.areasSettings.adjustOutlineThickness&&(i=this.zoomLevel());var o=s.rollOverOutlineThickness;isNaN(o)||e.setAttr("stroke-width",o/i),(s=s.rollOverPattern)&&e.pattern(s,this.mapScale)}"MapImage"==t.objectType&&(s=t.rollOverScaleReal,isNaN(s)||1==s||(t.tempScale=e.scale,e.translate(e.x,e.y,e.scale*s,!0))),this.useHandCursorOnClickableOjects&&this.checkIfClickable(t)&&e.setAttr("cursor","pointer"),this.addObjectEventListeners(e,t),t.isOver=!0}},rollOverMapObject:function(t,e,i){if(this.chartCreated){this.handleMouseMove();var s=this.previouslyHovered;if(s&&s!=t?(!1===this.checkIfSelected(s)&&(this.returnInitialColor(s,!0),this.previouslyHovered=null),this.hideBalloon()):clearTimeout(this.hoverInt),!this.preventHover){if(!1===this.checkIfSelected(t)){if(s=t.groupId){var o,s=this.getGroupById(s);for(o=0;o<s.length;o++)s[o]!=t&&this.showAsRolledOver(s[o])}this.showAsRolledOver(t)}else(s=t.displayObject)&&(this.allowClickOnSelectedObject?s.setAttr("cursor","pointer"):s.setAttr("cursor","default"));if(this.showDescriptionOnHover)this.showDescription(t);else if((this.showBalloonOnSelectedObject||!this.checkIfSelected(t))&&!1!==e&&(o=this.balloon,e=t.colorReal,s="",void 0!==e&&this.useObjectColorForBalloon||(e=o.fillColor),(o=t.balloonTextReal)&&(s=this.formatString(o,t)),this.balloonLabelFunction&&(s=this.balloonLabelFunction(t,this)),s&&""!==s)){var a,r;"MapArea"==t.objectType&&(r=this.getAreaCenterLatitude(t),a=this.getAreaCenterLongitude(t),r=this.latitudeToY(r),a=this.longitudeToX(a)),"MapImage"==t.objectType&&(a=t.displayObject.x*this.zoomLevel()+this.mapContainer.x,r=t.displayObject.y*this.zoomLevel()+this.mapContainer.y),this.showBalloon(s,e,this.mouseIsOver,a,r)}i={type:"rollOverMapObject",mapObject:t,chart:this,event:i},this.fire(i.type,i),this.previouslyHovered=t}}},longitudeToX:function(t){return this.longitudeToCoordinate(t)*this.zoomLevel()+this.mapContainer.x},latitudeToY:function(t){return this.latitudeToCoordinate(t)*this.zoomLevel()+this.mapContainer.y},rollOutMapObject:function(t,e){if(this.hideBalloon(),this.chartCreated&&t.isOver){this.checkIfSelected(t)||this.returnInitialColor(t);var i={type:"rollOutMapObject",mapObject:t,chart:this,event:e};this.fire(i.type,i)}},formatString:function(t,e){var i=this.nf,s=this.pf,o=e.title;e.titleTr&&(o=e.titleTr),void 0==o&&(o="");var a=e.value,a=isNaN(a)?"":AmCharts.formatNumber(a,i),i=e.percents,i=isNaN(i)?"":AmCharts.formatNumber(i,s),s=e.description;void 0==s&&(s="");var r=e.customData;return void 0==r&&(r=""),t=AmCharts.massReplace(t,{"[[title]]":o,"[[value]]":a,"[[percent]]":i,"[[description]]":s,"[[customData]]":r})},clickMapObject:function(t,e){if(this.hideBalloon(),this.chartCreated&&!this.preventHover&&!this.mapWasDragged&&this.checkIfClickable(t)&&!this.mapWasPinched){this.selectObject(t);var i={type:"clickMapObject",mapObject:t,chart:this,event:e};this.fire(i.type,i),this.objectWasClicked=!0}},checkIfClickable:function(t){var e=this.allowClickOnSelectedObject;return this.selectedObject==t&&e?!0:(this.selectedObject!=t||e)&&(!0===t.selectable||"MapArea"==t.objectType&&t.autoZoomReal||t.url||t.linkToObject||0<t.images.length||0<t.lines.length||!isNaN(t.zoomLevel)||!isNaN(t.zoomX)||!isNaN(t.zoomY)||t.description)?!0:!1},handleResize:function(){(AmCharts.isPercents(this.width)||AmCharts.isPercents(this.height))&&this.invalidateSize(),this.renderFix()},resizeMap:function(){var t=this.mapSet;if(t)if(this.fitMapToContainer){var e=t.getBBox(),i=this.realWidth,s=this.realHeight,o=e.width,a=e.height,i=o/i>a/s?i/o:s/a;t.translate(-e.x*i,-e.y*i,i),this.mapScale=i,this.mapHeight=a*i,this.mapWidth=o*i}else e=group.transform.match(/([\-]?[\d.]+)/g),t.translate(e[0],e[1],e[2])},zoomIn:function(){this.skipClick=!0;var t=this.zoomLevel()*this.zoomControl.zoomFactor;this.zoomTo(t)},zoomOut:function(){this.skipClick=!0;var t=this.zoomLevel()/this.zoomControl.zoomFactor;this.zoomTo(t)},moveLeft:function(){this.skipClick=!0;var t=this.zoomX()+this.zoomControl.panStepSize;this.zoomTo(this.zoomLevel(),t,this.zoomY())},moveRight:function(){this.skipClick=!0;var t=this.zoomX()-this.zoomControl.panStepSize;this.zoomTo(this.zoomLevel(),t,this.zoomY())},moveUp:function(){this.skipClick=!0;var t=this.zoomY()+this.zoomControl.panStepSize;this.zoomTo(this.zoomLevel(),this.zoomX(),t)},moveDown:function(){this.skipClick=!0;var t=this.zoomY()-this.zoomControl.panStepSize;this.zoomTo(this.zoomLevel(),this.zoomX(),t)},zoomX:function(){return this.mapSet?Math.round(1e4*this.mapContainer.x/this.mapWidth)/1e4:0/0},zoomY:function(){return this.mapSet?Math.round(1e4*this.mapContainer.y/this.mapHeight)/1e4:0/0},goHome:function(){this.selectObject(this.dataProvider);var t={type:"homeButtonClicked",chart:this};this.fire(t.type,t)},zoomLevel:function(){return Math.round(1e5*this.mapContainer.scale)/1e5},showDescriptionAndGetUrl:function(){var t=this.selectedObject;if(t){this.showDescription();var e=t.url;if(e)AmCharts.getURL(e,t.urlTarget);else if(e=t.linkToObject){if("string"==typeof e){var i=this.getObjectById(e);if(i)return void this.selectObject(i)}e&&t.passZoomValuesToTarget&&(e.zoomLatitude=this.zoomLatitude(),e.zoomLongitude=this.zoomLongitude(),e.zoomLevel=this.zoomLevel()),this.extendMapData(e)||this.selectObject(e)}}},extendMapData:function(t){var e=t.objectType;return"MapImage"!=e&&"MapArea"!=e&&"MapLine"!=e?(AmCharts.extend(t,new AmCharts.MapData,!0),this.dataProvider=t,this.zoomInstantly=!0,this.validateData(),!0):void 0},showDescription:function(t){if(t||(t=this.selectedObject),this.allowMultipleDescriptionWindows||this.closeAllDescriptions(),t.description){var e=t.descriptionWindow;e&&e.close(),e=new AmCharts.DescriptionWindow,t.descriptionWindow=e;var i=t.descriptionWindowWidth,s=t.descriptionWindowHeight,o=t.descriptionWindowLeft,a=t.descriptionWindowTop,r=t.descriptionWindowRight,n=t.descriptionWindowBottom;isNaN(r)||(o=this.realWidth-r),isNaN(n)||(a=this.realHeight-n);var h=t.descriptionWindowX;isNaN(h)||(o=h),h=t.descriptionWindowY,isNaN(h)||(a=h),isNaN(o)&&(o=this.mouseX,o=o>this.realWidth/2?o-i-20:o+20),isNaN(a)&&(a=this.mouseY),e.maxHeight=s,h=t.title,t.titleTr&&(h=t.titleTr),e.show(this,this.descriptionsDiv,t.description,h),t=e.div.style,t.position="absolute",t.width=i+"px",t.maxHeight=s+"px",isNaN(n)||(a-=e.div.offsetHeight),isNaN(r)||(o-=e.div.offsetWidth),t.left=o+"px",t.top=a+"px"}},parseXMLObject:function(t){var e={root:{}};this.parseXMLNode(e,"root",t),this.svgData=e.root.svg,this.getBounds()},getBounds:function(){var t=this.dataProvider;try{var e=this.svgData.defs["amcharts:ammap"];t.leftLongitude=Number(e.leftLongitude),t.rightLongitude=Number(e.rightLongitude),t.topLatitude=Number(e.topLatitude),t.bottomLatitude=Number(e.bottomLatitude),t.projection=e.projection;var i=e.wrappedLongitudes;i&&(t.rightLongitude+=360),t.wrappedLongitudes=i}catch(t){}},recalcLongitude:function(t){var e=this.dataProvider.wrappedLongitudes;return void 0!=t&&e&&t<this.dataProvider.leftLongitude?Number(t)+360:t},latitudeToCoordinate:function(t){var e,i=this.dataProvider;if(this.mapSet){e=i.topLatitude;var s=i.bottomLatitude;"mercator"==i.projection&&(t=this.mercatorLatitudeToCoordinate(t),e=this.mercatorLatitudeToCoordinate(e),s=this.mercatorLatitudeToCoordinate(s)),e=(t-e)/(s-e)*this.mapHeight}return e},longitudeToCoordinate:function(t){t=this.recalcLongitude(t);var e,i=this.dataProvider;return this.mapSet&&(e=i.leftLongitude,e=(t-e)/(i.rightLongitude-e)*this.mapWidth),e},mercatorLatitudeToCoordinate:function(t){return t>89.5&&(t=89.5),-89.5>t&&(t=-89.5),t=AmCharts.degreesToRadians(t),t=.5*Math.log((1+Math.sin(t))/(1-Math.sin(t))),AmCharts.radiansToDegrees(t/2)},zoomLatitude:function(){return this.coordinateToLatitude((-this.mapContainer.y+this.previousHeight/2)/this.zoomLevel())},zoomLongitude:function(){return this.coordinateToLongitude((-this.mapContainer.x+this.previousWidth/2)/this.zoomLevel())},getAreaCenterLatitude:function(t){t=t.displayObject.getBBox();var e=this.mapScale;return t=-this.mapSet.getBBox().y*e+(t.y+t.height/2)*e,this.coordinateToLatitude(t)},getAreaCenterLongitude:function(t){t=t.displayObject.getBBox();var e=this.mapScale;return t=-this.mapSet.getBBox().x*e+(t.x+t.width/2)*e,this.coordinateToLongitude(t)},coordinateToLatitude:function(t){var e;if(this.mapSet){var i=this.dataProvider,s=i.bottomLatitude,o=i.topLatitude;e=this.mapHeight,"mercator"==i.projection?(i=this.mercatorLatitudeToCoordinate(s),o=this.mercatorLatitudeToCoordinate(o),t=2*Math.atan(Math.exp(2*(t*(i-o)/e+o)*Math.PI/180))-.5*Math.PI,e=AmCharts.radiansToDegrees(t)):e=t/e*(s-o)+o}return Math.round(1e6*e)/1e6},coordinateToLongitude:function(t){var e,i=this.dataProvider;return this.mapSet&&(e=t/this.mapWidth*(i.rightLongitude-i.leftLongitude)+i.leftLongitude),Math.round(1e6*e)/1e6},milesToPixels:function(t){var e=this.dataProvider;return this.mapWidth/(e.rightLongitude-e.leftLongitude)*t/69.172},kilometersToPixels:function(t){var e=this.dataProvider;return this.mapWidth/(e.rightLongitude-e.leftLongitude)*t/111.325},handleBackgroundClick:function(t){if(this.backgroundZoomsToTop&&!this.mapWasDragged){var e=this.dataProvider;if(this.checkIfClickable(e))this.clickMapObject(e);else{t=e.zoomX;var i=e.zoomY,s=e.zoomLongitude,o=e.zoomLatitude,e=e.zoomLevel;isNaN(t)||isNaN(i)||this.zoomTo(e,t,i),isNaN(s)||isNaN(o)||this.zoomToLongLat(e,s,o,!0)}}},parseXMLNode:function(t,e,i,s){void 0===s&&(s="");var o,a,r;if(i){var n=i.childNodes.length;for(o=0;n>o;o++){a=i.childNodes[o];var h=a.nodeName,l=a.nodeValue?this.trim(a.nodeValue):"",c=!1;if(a.attributes&&0<a.attributes.length&&(c=!0),0!==a.childNodes.length||""!==l||!1!==c)if(3==a.nodeType||4==a.nodeType){if(""!==l){a=0;for(r in t[e])t[e].hasOwnProperty(r)&&a++;a?t[e]["#text"]=l:t[e]=l}}else if(1==a.nodeType){var d;if(void 0!==t[e][h]?void 0===t[e][h].length?(d=t[e][h],t[e][h]=[],t[e][h].push(d),t[e][h].push({}),d=t[e][h][1]):"object"==typeof t[e][h]&&(t[e][h].push({}),d=t[e][h][t[e][h].length-1]):(t[e][h]={},d=t[e][h]),a.attributes&&a.attributes.length)for(l=0;l<a.attributes.length;l++)d[a.attributes[l].name]=a.attributes[l].value;void 0!==t[e][h].length?this.parseXMLNode(t[e][h],t[e][h].length-1,a,s+"  "):this.parseXMLNode(t[e],h,a,s+"  ")}}a=0,i="";for(r in t[e])"#text"==r?i=t[e][r]:a++;0===a&&void 0===t[e].length&&(t[e]=i)}},doDoubleClickZoom:function(){if(!this.mapWasDragged){var t=this.zoomLevel()*this.zoomControl.zoomFactor;this.zoomToStageXY(t,this.mouseX,this.mouseY)}},getDevInfo:function(){var t=this.zoomLevel(),t={chart:this,type:"writeDevInfo",zoomLevel:t,zoomX:this.zoomX(),zoomY:this.zoomY(),zoomLatitude:this.zoomLatitude(),zoomLongitude:this.zoomLongitude(),latitude:this.coordinateToLatitude((this.mouseY-this.mapContainer.y)/t),longitude:this.coordinateToLongitude((this.mouseX-this.mapContainer.x)/t),left:this.mouseX,top:this.mouseY,right:this.realWidth-this.mouseX,bottom:this.realHeight-this.mouseY,percentLeft:Math.round(this.mouseX/this.realWidth*100)+"%",percentTop:Math.round(this.mouseY/this.realHeight*100)+"%",percentRight:Math.round((this.realWidth-this.mouseX)/this.realWidth*100)+"%",percentBottom:Math.round((this.realHeight-this.mouseY)/this.realHeight*100)+"%"
},e="zoomLevel:"+t.zoomLevel+", zoomLongitude:"+t.zoomLongitude+", zoomLatitude:"+t.zoomLatitude+"\n",e=e+("zoomX:"+t.zoomX+", zoomY:"+t.zoomY+"\n"),e=e+("latitude:"+t.latitude+", longitude:"+t.longitude+"\n"),e=e+("left:"+t.left+", top:"+t.top+"\n"),e=e+("right:"+t.right+", bottom:"+t.bottom+"\n"),e=e+('left:"'+t.percentLeft+'", top:"'+t.percentTop+'"\n'),e=e+('right:"'+t.percentRight+'", bottom:"'+t.percentBottom+'"\n');return t.str=e,this.fire(t.type,t),t},getXY:function(t,e,i){return void 0!==t&&(-1!=String(t).indexOf("%")?(t=Number(t.split("%").join("")),i&&(t=100-t),t=Number(t)*e/100):i&&(t=e-t)),t},getObjectById:function(t){var e=this.dataProvider;if(e.areas){var i=this.getObject(t,e.areas);if(i)return i}return(i=this.getObject(t,e.images))?i:(t=this.getObject(t,e.lines))?t:void 0},getObject:function(t,e){if(e){var i;for(i=0;i<e.length;i++){var s=e[i];if(s.id==t)return s;if(s.areas){var o=this.getObject(t,s.areas);if(o)return o}if(o=this.getObject(t,s.images))return o;if(s=this.getObject(t,s.lines))return s}}},parseData:function(){var t=this.dataProvider;this.processObject(t.areas,t,"area"),this.processObject(t.images,t,"image"),this.processObject(t.lines,t,"line")},processObject:function(t,e,i){if(t){var s;for(s=0;s<t.length;s++){var o=t[s];o.parentObject=e,"area"==i&&AmCharts.extend(o,new AmCharts.MapArea(this.theme),!0),"image"==i&&(o=AmCharts.extend(o,new AmCharts.MapImage(this.theme),!0)),"line"==i&&(o=AmCharts.extend(o,new AmCharts.MapLine(this.theme),!0)),t[s]=o,o.areas&&this.processObject(o.areas,o,"area"),o.images&&this.processObject(o.images,o,"image"),o.lines&&this.processObject(o.lines,o,"line")}}},positionChanged:function(){var t={type:"positionChanged",zoomX:this.zoomX(),zoomY:this.zoomY(),zoomLevel:this.zoomLevel(),chart:this};this.fire(t.type,t)},getX:function(t,e){return this.getXY(t,this.realWidth,e)},getY:function(t,e){return this.getXY(t,this.realHeight,e)},trim:function(t){if(t){var e;for(e=0;e<t.length;e++)if(-1===" \n\r	\f            ​\u2028\u2029　".indexOf(t.charAt(e))){t=t.substring(e);break}for(e=t.length-1;e>=0;e--)if(-1===" \n\r	\f            ​\u2028\u2029　".indexOf(t.charAt(e))){t=t.substring(0,e+1);break}return-1===" \n\r	\f            ​\u2028\u2029　".indexOf(t.charAt(0))?t:""}},destroy:function(){var t=this.svgAreas;if(t)for(var e=0;e<t.length;e++);AmCharts.AmMap.base.destroy.call(this)}}),AmCharts.ZoomControl=AmCharts.Class({construct:function(t){this.cname="ZoomControl",this.panStepSize=.1,this.zoomFactor=2,this.maxZoomLevel=64,this.minZoomLevel=1,this.zoomControlEnabled=this.panControlEnabled=!0,this.buttonRollOverColor="#CC0000",this.buttonFillColor="#990000",this.buttonFillAlpha=1,this.buttonBorderColor="#FFFFFF",this.buttonIconAlpha=this.buttonBorderThickness=this.buttonBorderAlpha=1,this.gridColor="#FFFFFF",this.homeIconFile="homeIcon.gif",this.gridBackgroundColor="#000000",this.gridBackgroundAlpha=.15,this.gridAlpha=1,this.buttonSize=18,this.iconSize=11,this.buttonCornerRadius=0,this.gridHeight=150,this.top=this.left=10,AmCharts.applyTheme(this,t,this.cname)},init:function(t,e){var i=this;i.chart=t,AmCharts.remove(i.set);var s=e.set();AmCharts.setCN(t,s,"zoom-control");var o=i.buttonSize,a=i.zoomControlEnabled,r=i.panControlEnabled,n=i.buttonFillColor,h=i.buttonFillAlpha,l=i.buttonBorderThickness,c=i.buttonBorderColor,d=i.buttonBorderAlpha,m=i.buttonCornerRadius,u=i.buttonRollOverColor,p=i.gridHeight,g=i.zoomFactor,v=i.minZoomLevel,C=i.maxZoomLevel,f=i.buttonIconAlpha,b=t.getX(i.left),A=t.getY(i.top);isNaN(i.right)||(b=t.getX(i.right,!0),b=r?b-3*o:b-o),isNaN(i.bottom)||(A=t.getY(i.bottom,!0),a&&(A-=p+3*o),A=r?A-3*o:A+o),s.translate(b,A),i.previousDY=0/0;var N;if(a){N=e.set(),AmCharts.setCN(t,N,"zoom-control-zoom"),s.push(N),i.set=s,i.zoomSet=N,A=AmCharts.rect(e,o+6,p+2*o+6,i.gridBackgroundColor,i.gridBackgroundAlpha,0,0,0,4),AmCharts.setCN(t,A,"zoom-bg"),A.translate(-3,-3),A.mouseup(function(){i.handleBgUp()}).touchend(function(){i.handleBgUp()}),N.push(A),A=new AmCharts.SimpleButton,A.setIcon(t.pathToImages+"plus.gif",i.iconSize),A.setClickHandler(t.zoomIn,t),A.init(e,o,o,n,h,l,c,d,m,u,f),AmCharts.setCN(t,A.set,"zoom-in"),N.push(A.set),A=new AmCharts.SimpleButton,A.setIcon(t.pathToImages+"minus.gif",i.iconSize),A.setClickHandler(t.zoomOut,t),A.init(e,o,o,n,h,l,c,d,m,u,f),A.set.translate(0,p+o),AmCharts.setCN(t,A.set,"zoom-out"),N.push(A.set);var O,b=Math.log(C/v)/Math.log(g)+1,a=p/b;for(O=1;b>O;O++)A=o+O*a,A=AmCharts.line(e,[1,o-2],[A,A],i.gridColor,i.gridAlpha,1),AmCharts.setCN(t,A,"zoom-grid"),N.push(A);A=new AmCharts.SimpleButton,A.setDownHandler(i.draggerDown,i),A.setClickHandler(i.draggerUp,i),A.init(e,o,a,n,h,l,c,d,m,u),AmCharts.setCN(t,A.set,"zoom-dragger"),N.push(A.set),i.dragger=A.set,i.previousY=0/0,p-=a,v=Math.log(v/100)/Math.log(g),g=Math.log(C/100)/Math.log(g),i.realStepSize=p/(g-v),i.realGridHeight=p,i.stepMax=g}r&&(r=e.set(),AmCharts.setCN(t,r,"zoom-control-pan"),s.push(r),N&&N.translate(o,4*o),N=new AmCharts.SimpleButton,N.setIcon(t.pathToImages+"panLeft.gif",i.iconSize),N.setClickHandler(t.moveLeft,t),N.init(e,o,o,n,h,l,c,d,m,u,f),N.set.translate(0,o),AmCharts.setCN(t,N.set,"pan-left"),r.push(N.set),N=new AmCharts.SimpleButton,N.setIcon(t.pathToImages+"panRight.gif",i.iconSize),N.setClickHandler(t.moveRight,t),N.init(e,o,o,n,h,l,c,d,m,u,f),N.set.translate(2*o,o),AmCharts.setCN(t,N.set,"pan-right"),r.push(N.set),N=new AmCharts.SimpleButton,N.setIcon(t.pathToImages+"panUp.gif",i.iconSize),N.setClickHandler(t.moveUp,t),N.init(e,o,o,n,h,l,c,d,m,u,f),N.set.translate(o,0),AmCharts.setCN(t,N.set,"pan-up"),r.push(N.set),N=new AmCharts.SimpleButton,N.setIcon(t.pathToImages+"panDown.gif",i.iconSize),N.setClickHandler(t.moveDown,t),N.init(e,o,o,n,h,l,c,d,m,u,f),N.set.translate(o,2*o),AmCharts.setCN(t,N.set,"pan-down"),r.push(N.set),h=new AmCharts.SimpleButton,h.setIcon(t.pathToImages+i.homeIconFile,i.iconSize),h.setClickHandler(t.goHome,t),h.init(e,o,o,n,0,0,c,0,m,u,f),h.set.translate(o,o),AmCharts.setCN(t,h.set,"pan-home"),r.push(h.set),s.push(r))},draggerDown:function(){this.chart.stopDrag(),this.isDragging=!0},draggerUp:function(){this.isDragging=!1},handleBgUp:function(){var t=this.chart,e=100*Math.pow(this.zoomFactor,this.stepMax-(t.mouseY-this.zoomSet.y-this.set.y-this.buttonSize-this.realStepSize/2)/this.realStepSize);t.zoomTo(e)},update:function(){var t,e=this.zoomFactor,i=this.realStepSize,s=this.stepMax,o=this.dragger,a=this.buttonSize,r=this.chart;this.isDragging?(r.stopDrag(),t=o.y+(r.mouseY-this.previousY),t=AmCharts.fitToBounds(t,a,this.realGridHeight+a),i=100*Math.pow(e,s-(t-a)/i),r.zoomTo(i,0/0,0/0,!0)):(t=Math.log(r.zoomLevel()/100)/Math.log(e),t=(s-t)*i+a),this.previousY=r.mouseY,this.previousDY!=t&&o&&(o.translate(0,t),this.previousDY=t)}}),AmCharts.SimpleButton=AmCharts.Class({construct:function(){},init:function(t,e,i,s,o,a,r,n,h,l,c){var d=this;d.rollOverColor=l,d.color=s,l=t.set(),d.set=l,s=AmCharts.rect(t,e,i,s,o,a,r,n,h),l.push(s),(o=d.iconPath)&&(a=d.iconSize,t=t.image(o,(e-a)/2,(i-a)/2,a,a),l.push(t),t.setAttr("opacity",c),t.mousedown(function(){d.handleDown()}).mouseup(function(){d.handleUp()}).mouseover(function(){d.handleOver()}).mouseout(function(){d.handleOut()})),s.mousedown(function(){d.handleDown()}).touchstart(function(){d.handleDown()}).mouseup(function(){d.handleUp()}).touchend(function(){d.handleUp()}).mouseover(function(){d.handleOver()}).mouseout(function(){d.handleOut()}),d.bg=s},setIcon:function(t,e){this.iconPath=t,this.iconSize=e},setClickHandler:function(t,e){this.clickHandler=t,this.scope=e},setDownHandler:function(t,e){this.downHandler=t,this.scope=e},handleUp:function(){var t=this.clickHandler;t&&t.call(this.scope)},handleDown:function(){var t=this.downHandler;t&&t.call(this.scope)},handleOver:function(){this.bg.setAttr("fill",this.rollOverColor)},handleOut:function(){this.bg.setAttr("fill",this.color)}}),AmCharts.SmallMap=AmCharts.Class({construct:function(t){this.cname="SmallMap",this.mapColor="#e6e6e6",this.rectangleColor="#FFFFFF",this.top=this.right=10,this.minimizeButtonWidth=16,this.backgroundColor="#9A9A9A",this.backgroundAlpha=1,this.borderColor="#FFFFFF",this.borderThickness=3,this.borderAlpha=1,this.size=.2,this.enabled=!0,AmCharts.applyTheme(this,t,this.cname)},init:function(t,e){var i=this;if(i.enabled){i.chart=t,i.container=e,i.width=t.realWidth*i.size,i.height=t.realHeight*i.size,AmCharts.remove(i.set);var s=e.set();i.set=s,AmCharts.setCN(t,s,"small-map");var o=e.set();i.allSet=o,s.push(o),i.buildSVGMap();var a=i.borderThickness,r=i.borderColor,n=AmCharts.rect(e,i.width+a,i.height+a,i.backgroundColor,i.backgroundAlpha,a,r,i.borderAlpha);AmCharts.setCN(t,n,"small-map-bg"),n.translate(-a/2,-a/2),o.push(n),n.toBack();var h,l,n=i.minimizeButtonWidth,c=new AmCharts.SimpleButton;c.setIcon(t.pathToImages+"arrowDown.gif",n),c.setClickHandler(i.minimize,i),c.init(e,n,n,r,1,1,r,1),AmCharts.setCN(t,c.set,"small-map-down"),c=c.set,i.downButtonSet=c,s.push(c);var d=new AmCharts.SimpleButton;d.setIcon(t.pathToImages+"arrowUp.gif",n),d.setClickHandler(i.maximize,i),d.init(e,n,n,r,1,1,r,1),AmCharts.setCN(t,d.set,"small-map-up"),r=d.set,i.upButtonSet=r,r.hide(),s.push(r);var m,u;isNaN(i.top)||(h=t.getY(i.top)+a,u=0),isNaN(i.bottom)||(h=t.getY(i.bottom,!0)-i.height-a,u=i.height-n+a/2),isNaN(i.left)||(l=t.getX(i.left)+a,m=-a/2),isNaN(i.right)||(l=t.getX(i.right,!0)-i.width-a,m=i.width-n+a/2),a=e.set(),a.clipRect(1,1,i.width,i.height),o.push(a),i.rectangleC=a,s.translate(l,h),c.translate(m,u),r.translate(m,u),o.mouseup(function(){i.handleMouseUp()}),i.drawRectangle()}else AmCharts.remove(i.allSet),AmCharts.remove(i.downButtonSet),AmCharts.remove(i.upButtonSet)},minimize:function(){this.downButtonSet.hide(),this.upButtonSet.show(),this.allSet.hide()},maximize:function(){this.downButtonSet.show(),this.upButtonSet.hide(),this.allSet.show()},buildSVGMap:function(){var t=this.chart,e={fill:this.mapColor,stroke:this.mapColor,"stroke-opacity":1},i=t.svgData.g.path,s=this.container,o=s.set();AmCharts.setCN(t,o,"small-map-image");var a;for(a=0;a<i.length;a++){var r=s.path(i[a].d).attr(e);o.push(r)}this.allSet.push(o),e=o.getBBox(),i=this.size*t.mapScale,s=-e.x*i,a=-e.y*i;var n=r=0;t.centerMap&&(r=(this.width-e.width*i)/2,n=(this.height-e.height*i)/2),this.mapWidth=e.width*i,this.mapHeight=e.height*i,this.dx=r,this.dy=n,o.translate(s+r,a+n,i)},update:function(){var t=this.chart,e=t.zoomLevel(),i=this.width,s=t.mapContainer,t=i/(t.realWidth*e),i=i/e,e=this.height/e,o=this.rectangle;o.translate(-s.x*t+this.dx,-s.y*t+this.dy),i>0&&e>0&&(o.setAttr("width",Math.ceil(i+1)),o.setAttr("height",Math.ceil(e+1))),this.rWidth=i,this.rHeight=e},drawRectangle:function(){var t=this.rectangle;AmCharts.remove(t),t=AmCharts.rect(this.container,10,10,"#000",0,1,this.rectangleColor,1),AmCharts.setCN(this.chart,t,"small-map-rectangle"),this.rectangleC.push(t),this.rectangle=t},handleMouseUp:function(){var t=this.chart,e=t.zoomLevel();t.zoomTo(e,-((t.mouseX-this.set.x-this.dx-this.rWidth/2)/this.mapWidth)*e,-((t.mouseY-this.set.y-this.dy-this.rHeight/2)/this.mapHeight)*e)}}),AmCharts.AreasProcessor=AmCharts.Class({construct:function(t){this.chart=t},process:function(t){this.updateAllAreas(),this.allObjects=[],t=t.areas;var e,i,s,o=this.chart,a=t.length,r=0,n=o.svgAreasById,h=!1,l=!1,c=0;for(i=0;a>i;i++)s=t[i],s=s.value,(!1===h||s>h)&&(h=s),(!1===l||l>s)&&(l=s),isNaN(s)||(r+=Math.abs(s),c++);for(isNaN(o.minValue)||(l=o.minValue),isNaN(o.maxValue)||(h=o.maxValue),o.maxValueReal=h,o.minValueReal=l,i=0;a>i;i++)s=t[i],isNaN(s.value)?s.percents=void 0:(s.percents=(s.value-l)/r*100,l==h&&(s.percents=100));for(i=0;a>i;i++){s=t[i];var d=n[s.id];e=o.areasSettings,d&&d.className&&(r=o.areasClasses[d.className])&&(e=r,e=AmCharts.processObject(e,AmCharts.AreasSettings,o.theme));var m=e.color,u=e.alpha,p=e.outlineThickness,g=e.rollOverColor,v=e.selectedColor,C=e.rollOverAlpha,f=e.outlineColor,b=e.outlineAlpha,A=e.balloonText,N=e.selectable,O=e.pattern,z=e.rollOverOutlineColor,L=e.bringForwardOnHover,w=e.preserveOriginalAttributes;if(this.allObjects.push(s),s.chart=o,s.baseSettings=e,s.autoZoomReal=void 0==s.autoZoom?e.autoZoom:s.autoZoom,r=s.color,void 0==r&&(r=m),c=s.alpha,isNaN(c)&&(c=u),u=s.rollOverAlpha,isNaN(u)&&(u=C),isNaN(u)&&(u=c),C=s.rollOverColor,void 0==C&&(C=g),g=s.pattern,void 0==g&&(g=O),O=s.selectedColor,void 0==O&&(O=v),(v=s.balloonText)||(v=A),void 0==e.colorSolid||isNaN(s.value)||(A=Math.floor((s.value-l)/((h-l)/o.colorSteps)),A==o.colorSteps&&A--,colorPercent=1/(o.colorSteps-1)*A,h==l&&(colorPercent=1),s.colorReal=AmCharts.getColorFade(r,e.colorSolid,colorPercent)),void 0!=s.color&&(s.colorReal=s.color),void 0==s.selectable&&(s.selectable=N),void 0==s.colorReal&&(s.colorReal=m),m=s.outlineColor,void 0==m&&(m=f),f=s.outlineAlpha,isNaN(f)&&(f=b),b=s.outlineThickness,isNaN(b)&&(b=p),p=s.rollOverOutlineColor,void 0==p&&(p=z),void 0==s.bringForwardOnHover&&(s.bringForwardOnHover=L),void 0==s.preserveOriginalAttributes&&(s.preserveOriginalAttributes=w),s.alphaReal=c,s.rollOverColorReal=C,s.rollOverAlphaReal=u,s.balloonTextReal=v,s.selectedColorReal=O,s.outlineColorReal=m,s.outlineAlphaReal=f,s.rollOverOutlineColorReal=p,s.outlineThicknessReal=b,s.patternReal=g,AmCharts.processDescriptionWindow(e,s),d&&(e=d.area,z=d.title,s.enTitle=d.title,z&&!s.title&&(s.title=z),(d=o.language)?(z=AmCharts.mapTranslations)&&(d=z[d])&&d[s.enTitle]&&(s.titleTr=d[s.enTitle]):s.titleTr=void 0,e)){s.displayObject=e,s.mouseEnabled&&o.addObjectEventListeners(e,s);var T;void 0!=r&&(T=r),void 0!=s.colorReal&&(T=s.showAsSelected||o.selectedObject==s?s.selectedColorReal:s.colorReal),e.node.setAttribute("class",""),AmCharts.setCN(o,e,"map-area"),AmCharts.setCN(o,e,"map-area-"+e.id),s.preserveOriginalAttributes||(e.setAttr("fill",T),e.setAttr("stroke",m),e.setAttr("stroke-opacity",f),e.setAttr("stroke-width",b),e.setAttr("fill-opacity",c)),g&&e.pattern(g,o.mapScale),s.hidden&&e.hide()}}},updateAllAreas:function(){var t,e=this.chart,i=e.areasSettings,s=i.unlistedAreasColor,o=i.unlistedAreasAlpha,a=i.unlistedAreasOutlineColor,r=i.unlistedAreasOutlineAlpha,n=e.svgAreas,h=e.dataProvider,l=h.areas,c={};for(t=0;t<l.length;t++)c[l[t].id]=l[t];for(t=0;t<n.length;t++){if(l=n[t],i.preserveOriginalAttributes){if(l.customAttr)for(var d in l.customAttr)l.setAttr(d,l.customAttr[d])}else void 0!=s&&l.setAttr("fill",s),isNaN(o)||l.setAttr("fill-opacity",o),void 0!=a&&l.setAttr("stroke",a),isNaN(r)||l.setAttr("stroke-opacity",r),l.setAttr("stroke-width",i.outlineThickness);if(AmCharts.setCN(e,l,"map-area-unlisted"),h.getAreasFromMap&&!c[l.id]){var m=new AmCharts.MapArea(e.theme);m.parentObject=h,m.id=l.id,h.areas.push(m)}}}}),AmCharts.AreasSettings=AmCharts.Class({construct:function(t){this.cname="AreasSettings",this.alpha=1,this.autoZoom=!1,this.balloonText="[[title]]",this.color="#FFCC00",this.colorSolid="#990000",this.unlistedAreasAlpha=1,this.unlistedAreasColor="#DDDDDD",this.outlineColor="#FFFFFF",this.outlineAlpha=1,this.outlineThickness=.5,this.selectedColor=this.rollOverOutlineColor="#CC0000",this.unlistedAreasOutlineColor="#FFFFFF",this.unlistedAreasOutlineAlpha=1,this.descriptionWindowWidth=250,this.adjustOutlineThickness=!1,this.bringForwardOnHover=!0,AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.ImagesProcessor=AmCharts.Class({construct:function(t){this.chart=t,this.reset()},process:function(t){var e,i=t.images;for(e=0;e<i.length;e++)this.createImage(i[e],e);t.parentObject&&t.remainVisible&&this.process(t.parentObject)},createImage:function(t,e){var i=this.chart,s=i.container,o=i.mapImagesContainer,a=i.stageImagesContainer,r=i.imagesSettings;t.remove&&t.remove();var n=r.color,h=r.alpha,l=r.rollOverColor,c=r.selectedColor,d=r.balloonText,m=r.outlineColor,u=r.outlineAlpha,p=r.outlineThickness,g=r.selectedScale,v=r.labelPosition,C=r.labelColor,f=r.labelFontSize,b=r.bringForwardOnHover,A=r.labelRollOverColor,N=r.selectedLabelColor;t.index=e,t.chart=i,t.baseSettings=i.imagesSettings;var O=s.set();t.displayObject=O;var z=t.color;void 0==z&&(z=n),n=t.alpha,isNaN(n)&&(n=h),void 0==t.bringForwardOnHover&&(t.bringForwardOnHover=b),h=t.outlineAlpha,isNaN(h)&&(h=u),u=t.rollOverColor,void 0==u&&(u=l),l=t.selectedColor,void 0==l&&(l=c),(c=t.balloonText)||(c=d),d=t.outlineColor,void 0==d&&(d=m),void 0==d&&(d=z),m=t.outlineThickness,isNaN(m)&&(m=p),(p=t.labelPosition)||(p=v),v=t.labelColor,void 0==v&&(v=C),C=t.labelRollOverColor,void 0==C&&(C=A),A=t.selectedLabelColor,void 0==A&&(A=N),N=t.labelFontSize,isNaN(N)&&(N=f),f=t.selectedScale,isNaN(f)&&(f=g),isNaN(t.rollOverScale),t.colorReal=z,t.alphaReal=n,t.rollOverColorReal=u,t.balloonTextReal=c,t.selectedColorReal=l,t.labelColorReal=v,t.labelRollOverColorReal=C,t.selectedLabelColorReal=A,t.labelFontSizeReal=N,t.labelPositionReal=p,t.selectedScaleReal=f,t.rollOverScaleReal=f,AmCharts.processDescriptionWindow(r,t),t.centeredReal=void 0==t.centered?r.centered:t.centered,N=t.type,A=t.imageURL,C=t.svgPath,u=t.width,v=t.height,r=t.scale,isNaN(t.percentWidth)||(u=t.percentWidth/100*i.realWidth),isNaN(t.percentHeight)||(v=t.percentHeight/100*i.realHeight);var L;A||N||C||(N="circle",u=1,h=n=0),l=g=0,f=t.selectedColorReal,N?(isNaN(u)&&(u=10),isNaN(v)&&(v=10),"kilometers"==t.widthAndHeightUnits&&(u=i.kilometersToPixels(t.width),v=i.kilometersToPixels(t.height)),"miles"==t.widthAndHeightUnits&&(u=i.milesToPixels(t.width),v=i.milesToPixels(t.height)),("circle"==N||"bubble"==N)&&(v=u),L=this.createPredefinedImage(z,d,m,N,u,v),l=g=0,t.centeredReal?(isNaN(t.right)||(g=u*r),isNaN(t.bottom)||(l=v*r)):(g=u*r/2,l=v*r/2),L.translate(g,l,r)):A?(isNaN(u)&&(u=10),isNaN(v)&&(v=10),L=s.image(A,0,0,u,v),L.node.setAttribute("preserveAspectRatio","none"),L.setAttr("opacity",n),t.centeredReal&&(g=isNaN(t.right)?-u/2:u/2,l=isNaN(t.bottom)?-v/2:v/2,L.translate(g,l))):C&&(L=s.path(C),d=L.getBBox(),t.centeredReal?(g=-d.x*r-d.width*r/2,isNaN(t.right)||(g=-g),l=-d.y*r-d.height*r/2,isNaN(t.bottom)||(l=-l)):g=l=0,L.translate(g,l,r),L.x=g,L.y=l),L&&(O.push(L),t.image=L,L.setAttr("stroke-opacity",h),L.setAttr("fill-opacity",n),L.setAttr("fill",z),AmCharts.setCN(i,L,"map-image"),void 0!=t.id&&AmCharts.setCN(i,L,"map-image-"+t.id)),!t.showAsSelected&&i.selectedObject!=t||void 0==f||L.setAttr("fill",f),z=null,void 0!==t.label&&(z=AmCharts.text(s,t.label,t.labelColorReal,i.fontFamily,t.labelFontSizeReal,t.labelAlign),AmCharts.setCN(i,z,"map-image-label"),void 0!==t.id&&AmCharts.setCN(i,z,"map-image-label-"+t.id),L=t.labelBackgroundAlpha,(n=t.labelBackgroundColor)&&L>0&&(h=z.getBBox(),s=AmCharts.rect(s,h.width+16,h.height+10,n,L),AmCharts.setCN(i,s,"map-image-label-background"),void 0!=t.id&&AmCharts.setCN(i,s,"map-image-label-background-"+t.id),O.push(s),t.labelBG=s),t.imageLabel=z,O.push(z),AmCharts.setCN(i,O,"map-image-container"),void 0!=t.id&&AmCharts.setCN(i,O,"map-image-container-"+t.id)),isNaN(t.latitude)||isNaN(t.longitude)?a.push(O):o.push(O),O&&(O.rotation=t.rotation),this.updateSizeAndPosition(t),t.mouseEnabled&&i.addObjectEventListeners(O,t),t.hidden&&O.hide()},updateSizeAndPosition:function(t){var e=this.chart,i=t.displayObject,s=e.getX(t.left),o=e.getY(t.top),a=t.image.getBBox();isNaN(t.right)||(s=e.getX(t.right,!0)-a.width*t.scale),isNaN(t.bottom)||(o=e.getY(t.bottom,!0)-a.height*t.scale);var r=t.longitude,n=t.latitude,a=this.objectsToResize;this.allSvgObjects.push(i),this.allObjects.push(t);var h=t.imageLabel;isNaN(s)||isNaN(o)?isNaN(n)||isNaN(r)||(s=e.longitudeToCoordinate(r),o=e.latitudeToCoordinate(n),i.translate(s,o,0/0,!0),!t.fixedSize)||(s=1,(t.showAsSelected||e.selectedObject==t)&&(s=t.selectedScaleReal),a.push({image:i,scale:s})):i.translate(s,o),this.positionLabel(h,t,t.labelPositionReal)},positionLabel:function(t,e,i){if(t){var s=e.image,o=0,a=0,r=0,n=0;s&&(n=s.getBBox(),a=s.y,o=s.x,r=n.width,n=n.height,e.svgPath&&(r*=e.scale,n*=e.scale));var s=t.getBBox(),h=s.width,l=s.height;"right"==i&&(o+=r+h/2+5,a+=n/2-2),"left"==i&&(o+=-h/2-5,a+=n/2-2),"top"==i&&(a-=l/2+3,o+=r/2),"bottom"==i&&(a+=n+l/2,o+=r/2),"middle"==i&&(o+=r/2,a+=n/2),t.translate(o+e.labelShiftX,a+e.labelShiftY),e.labelBG&&e.labelBG.translate(o-s.width/2+e.labelShiftX-9,a+e.labelShiftY-s.height/2-3)}},createPredefinedImage:function(t,e,i,s,o,a){var r,n=this.chart.container;switch(s){case"circle":r=AmCharts.circle(n,o/2,t,1,i,e,1);break;case"rectangle":r=AmCharts.polygon(n,[-o/2,o/2,o/2,-o/2],[a/2,a/2,-a/2,-a/2],t,1,i,e,1);break;case"bubble":r=AmCharts.circle(n,o/2,t,1,i,e,1,!0)}return r},reset:function(){this.objectsToResize=[],this.allSvgObjects=[],this.allObjects=[],this.allLabels=[]}}),AmCharts.ImagesSettings=AmCharts.Class({construct:function(t){this.cname="ImagesSettings",this.balloonText="[[title]]",this.alpha=1,this.borderAlpha=0,this.borderThickness=1,this.labelPosition="right",this.labelColor="#000000",this.labelFontSize=11,this.color="#000000",this.labelRollOverColor="#00CC00",this.centered=!0,this.rollOverScale=this.selectedScale=1,this.descriptionWindowWidth=250,this.bringForwardOnHover=!0,AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.LinesProcessor=AmCharts.Class({construct:function(t){this.chart=t,this.reset()},process:function(t){var e,i=t.lines,s=this.chart,o=s.linesSettings,a=this.objectsToResize,r=s.mapLinesContainer,n=s.stageLinesContainer,h=o.thickness,l=o.dashLength,c=o.arrow,d=o.arrowSize,m=o.arrowColor,u=o.arrowAlpha,p=o.color,g=o.alpha,v=o.rollOverColor,C=o.selectedColor,f=o.rollOverAlpha,b=o.balloonText,A=o.bringForwardOnHover,N=s.container;for(e=0;e<i.length;e++){var O=i[e];O.chart=s,O.baseSettings=o;var z=N.set();if(O.displayObject=z,this.allSvgObjects.push(z),this.allObjects.push(O),O.mouseEnabled&&s.addObjectEventListeners(z,O),O.remainVisible||s.selectedObject==O.parentObject){var L=O.thickness;isNaN(L)&&(L=h);var w=O.dashLength;isNaN(w)&&(w=l);var T=O.color;void 0==T&&(T=p);var S=O.alpha;isNaN(S)&&(S=g);var j=O.rollOverAlpha;isNaN(j)&&(j=f),isNaN(j)&&(j=S);var M=O.rollOverColor;void 0==M&&(M=v);var y=O.selectedColor;void 0==y&&(y=C);var k=O.balloonText;k||(k=b);var x=O.arrow;(!x||"none"==x&&"none"!=c)&&(x=c);var I=O.arrowColor;void 0==I&&(I=m),void 0==I&&(I=T);var B=O.arrowAlpha;isNaN(B)&&(B=u),isNaN(B)&&(B=S);var R=O.arrowSize;isNaN(R)&&(R=d),O.alphaReal=S,O.colorReal=T,O.rollOverColorReal=M,O.rollOverAlphaReal=j,O.balloonTextReal=k,O.selectedColorReal=y,O.thicknessReal=L,void 0==O.bringForwardOnHover&&(O.bringForwardOnHover=A),AmCharts.processDescriptionWindow(o,O);var D,j=this.processCoordinates(O.x,s.realWidth),M=this.processCoordinates(O.y,s.realHeight),H=O.longitudes,k=O.latitudes,W=H.length;if(W>0)for(j=[],D=0;W>D;D++)j.push(s.longitudeToCoordinate(H[D]));if(W=k.length,W>0)for(M=[],D=0;W>D;D++)M.push(s.latitudeToCoordinate(k[D]));if(0<j.length){if(AmCharts.dx=0,AmCharts.dy=0,H=AmCharts.line(N,j,M,T,1,L,w,!1,!1,!0),AmCharts.setCN(s,H,"map-line"),void 0!=O.id&&AmCharts.setCN(s,H,"map-line-"+O.id),w=AmCharts.line(N,j,M,T,.001,3,w,!1,!1,!0),AmCharts.dx=.5,AmCharts.dy=.5,z.push(H),z.push(w),z.setAttr("opacity",S),"none"!=x){var F,P,X;("end"==x||"both"==x)&&(S=j[j.length-1],T=M[M.length-1],1<j.length?(W=j[j.length-2],F=M[M.length-2]):(W=S,F=T),F=180*Math.atan((T-F)/(S-W))/Math.PI,P=S,X=T,F=0>S-W?F-90:F+90),"both"==x&&(S=AmCharts.polygon(N,[-R/2,0,R/2],[1.5*R,0,1.5*R],I,B,1,I,B),z.push(S),S.translate(P,X),S.rotate(F),AmCharts.setCN(s,H,"map-line-arrow"),void 0!=O.id&&AmCharts.setCN(s,H,"map-line-arrow-"+O.id),O.fixedSize&&a.push(S)),("start"==x||"both"==x)&&(S=j[0],X=M[0],1<j.length?(T=j[1],P=M[1]):(T=S,P=X),F=180*Math.atan((X-P)/(S-T))/Math.PI,P=S,F=0>S-T?F-90:F+90),"middle"==x&&(S=j[j.length-1],T=M[M.length-1],1<j.length?(W=j[j.length-2],F=M[M.length-2]):(W=S,F=T),P=W+(S-W)/2,X=F+(T-F)/2,F=180*Math.atan((T-F)/(S-W))/Math.PI,F=0>S-W?F-90:F+90),S=AmCharts.polygon(N,[-R/2,0,R/2],[1.5*R,0,1.5*R],I,B,1,I,B),AmCharts.setCN(s,H,"map-line-arrow"),void 0!=O.id&&AmCharts.setCN(s,H,"map-line-arrow-"+O.id),z.push(S),S.translate(P,X),S.rotate(F),O.fixedSize&&a.push(S),O.arrowSvg=S}O.fixedSize&&H&&(this.linesToResize.push({line:H,thickness:L}),this.linesToResize.push({line:w,thickness:3})),O.lineSvg=H,O.showAsSelected&&!isNaN(y)&&H.setAttr("stroke",y),0<k.length?r.push(z):n.push(z),O.hidden&&z.hide()}}}t.parentObject&&t.remainVisible&&this.process(t.parentObject)},processCoordinates:function(t,e){var i,s=[];for(i=0;i<t.length;i++){var o=t[i],a=Number(o);isNaN(a)&&(a=Number(o.replace("%",""))*e/100),isNaN(a)||s.push(a)}return s},reset:function(){this.objectsToResize=[],this.allSvgObjects=[],this.allObjects=[],this.linesToResize=[]}}),AmCharts.LinesSettings=AmCharts.Class({construct:function(t){this.cname="LinesSettings",this.balloonText="[[title]]",this.thickness=1,this.dashLength=0,this.arrowSize=10,this.arrowAlpha=1,this.arrow="none",this.color="#990000",this.descriptionWindowWidth=250,this.bringForwardOnHover=!0,AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.MapObject=AmCharts.Class({construct:function(t){this.fixedSize=this.mouseEnabled=!0,this.images=[],this.lines=[],this.areas=[],this.remainVisible=!0,this.passZoomValuesToTarget=!1,this.objectType=this.cname,AmCharts.applyTheme(this,t,"MapObject")}}),AmCharts.MapArea=AmCharts.Class({inherits:AmCharts.MapObject,construct:function(t){this.cname="MapArea",AmCharts.MapArea.base.construct.call(this,t),AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.MapLine=AmCharts.Class({inherits:AmCharts.MapObject,construct:function(t){this.cname="MapLine",this.longitudes=[],this.latitudes=[],this.x=[],this.y=[],this.arrow="none",AmCharts.MapLine.base.construct.call(this,t),AmCharts.applyTheme(this,t,this.cname)}}),AmCharts.MapImage=AmCharts.Class({inherits:AmCharts.MapObject,construct:function(t){this.cname="MapImage",this.scale=1,this.widthAndHeightUnits="pixels",this.labelShiftY=this.labelShiftX=0,AmCharts.MapImage.base.construct.call(this,t),AmCharts.applyTheme(this,t,this.cname)},remove:function(){var t=this.displayObject;t&&t.remove(),(t=this.imageLabel)&&t.remove()}}),AmCharts.degreesToRadians=function(t){return t/180*Math.PI},AmCharts.radiansToDegrees=function(t){return t/Math.PI*180},AmCharts.getColorFade=function(t,e,i){var s=AmCharts.hex2RGB(e);e=s[0];var o=s[1],s=s[2],a=AmCharts.hex2RGB(t);t=a[0];var r=a[1],a=a[2];return t+=Math.round((e-t)*i),r+=Math.round((o-r)*i),a+=Math.round((s-a)*i),"rgb("+t+","+r+","+a+")"},AmCharts.hex2RGB=function(t){return[parseInt(t.substring(1,3),16),parseInt(t.substring(3,5),16),parseInt(t.substring(5,7),16)]},AmCharts.processDescriptionWindow=function(t,e){isNaN(e.descriptionWindowX)&&(e.descriptionWindowX=t.descriptionWindowX),isNaN(e.descriptionWindowY)&&(e.descriptionWindowY=t.descriptionWindowY),isNaN(e.descriptionWindowLeft)&&(e.descriptionWindowLeft=t.descriptionWindowLeft),isNaN(e.descriptionWindowRight)&&(e.descriptionWindowRight=t.descriptionWindowRight),isNaN(e.descriptionWindowTop)&&(e.descriptionWindowTop=t.descriptionWindowTop),isNaN(e.descriptionWindowBottom)&&(e.descriptionWindowBottom=t.descriptionWindowBottom),isNaN(e.descriptionWindowWidth)&&(e.descriptionWindowWidth=t.descriptionWindowWidth),isNaN(e.descriptionWindowHeight)&&(e.descriptionWindowHeight=t.descriptionWindowHeight)},AmCharts.MapData=AmCharts.Class({inherits:AmCharts.MapObject,construct:function(){this.cname="MapData",AmCharts.MapData.base.construct.call(this),this.projection="mercator",this.topLatitude=90,this.bottomLatitude=-90,this.leftLongitude=-180,this.rightLongitude=180,this.zoomLevel=1,this.getAreasFromMap=!1}}),AmCharts.DescriptionWindow=AmCharts.Class({construct:function(){},show:function(t,e,i,s){var o=this,a=document.createElement("div");a.style.position="absolute";var r=t.classNamePrefix+"-description-";a.className="ammapDescriptionWindow "+r+"div",o.div=a,e.appendChild(a);var n=document.createElement("img");n.className="ammapDescriptionWindowCloseButton "+r+"close-img",n.src=t.pathToImages+"xIcon.gif",n.style.cssFloat="right",n.onclick=function(){o.close()},n.onmouseover=function(){n.src=t.pathToImages+"xIconH.gif"},n.onmouseout=function(){n.src=t.pathToImages+"xIcon.gif"},a.appendChild(n),e=document.createElement("div"),e.className="ammapDescriptionTitle "+r+"title-div",e.onmousedown=function(){o.div.style.zIndex=1e3},a.appendChild(e),s=document.createTextNode(s),e.appendChild(s),s=e.offsetHeight,e=document.createElement("div"),e.className="ammapDescriptionText "+r+"text-div",e.style.maxHeight=o.maxHeight-s-20+"px",a.appendChild(e),e.innerHTML=i},close:function(){try{this.div.parentNode.removeChild(this.div)}catch(t){}}}),AmCharts.ValueLegend=AmCharts.Class({construct:function(t){this.cname="ValueLegend",this.enabled=!0,this.showAsGradient=!1,this.minValue=0,this.height=12,this.width=200,this.bottom=this.left=10,this.borderColor="#FFFFFF",this.borderAlpha=this.borderThickness=1,this.color="#000000",this.fontSize=11,AmCharts.applyTheme(this,t,this.cname)},init:function(t,e){if(this.enabled){var i=t.areasSettings.color,s=t.areasSettings.colorSolid,o=t.colorSteps;AmCharts.remove(this.set);var a=e.set();this.set=a,AmCharts.setCN(t,a,"value-legend");var r=0,n=this.minValue,h=this.fontSize,l=t.fontFamily,c=this.color;if(void 0==n&&(n=t.minValueReal),void 0!==n&&(r=AmCharts.text(e,n,c,l,h,"left"),r.translate(0,h/2-1),AmCharts.setCN(t,r,"value-legend-min-label"),a.push(r),r=r.getBBox().height),n=this.maxValue,void 0===n&&(n=t.maxValueReal),void 0!==n&&(r=AmCharts.text(e,n,c,l,h,"right"),r.translate(this.width,h/2-1),AmCharts.setCN(t,r,"value-legend-max-label"),a.push(r),r=r.getBBox().height),this.showAsGradient)i=AmCharts.rect(e,this.width,this.height,[i,s],1,this.borderThickness,this.borderColor,1,0,0),AmCharts.setCN(t,i,"value-legend-gradient"),i.translate(0,r),a.push(i);else for(h=this.width/o,l=0;o>l;l++)c=AmCharts.getColorFade(i,s,1*l/(o-1)),c=AmCharts.rect(e,h,this.height,c,1,this.borderThickness,this.borderColor,1),AmCharts.setCN(t,c,"value-legend-color"),AmCharts.setCN(t,c,"value-legend-color-"+l),c.translate(h*l,r),a.push(c);s=i=0,o=a.getBBox(),r=t.getY(this.bottom,!0),h=t.getY(this.top),l=t.getX(this.right,!0),c=t.getX(this.left),isNaN(h)||(i=h),isNaN(r)||(i=r-o.height),isNaN(c)||(s=c),isNaN(l)||(s=l-o.width),a.translate(s,i)}else AmCharts.remove(this.set)}}),AmCharts.ObjectList=AmCharts.Class({construct:function(t){this.divId=t},init:function(t){this.chart=t;var e;e=this.divId,this.container&&(e=this.container),this.div=e="object"!=typeof e?document.getElementById(e):e,e=document.createElement("div"),e.className="ammapObjectList "+t.classNamePrefix+"-object-list-div",this.div.appendChild(e),this.addObjects(t.dataProvider,e)},addObjects:function(t,e){var i=this.chart,s=document.createElement("ul");s.className=i.classNamePrefix+"-object-list-ul";var o;if(t.areas)for(o=0;o<t.areas.length;o++){var a=t.areas[o];void 0===a.showInList&&(a.showInList=i.showAreasInList),this.addObject(a,s)}if(t.images)for(o=0;o<t.images.length;o++)a=t.images[o],void 0===a.showInList&&(a.showInList=i.showImagesInList),this.addObject(a,s);if(t.lines)for(o=0;o<t.lines.length;o++)a=t.lines[o],void 0===a.showInList&&(a.showInList=i.showLinesInList),this.addObject(a,s);0<s.childNodes.length&&e.appendChild(s)},addObject:function(t,e){var i=this;if(t.showInList&&void 0!==t.title){var s=i.chart,o=document.createElement("li");o.className=s.classNamePrefix+"-object-list-li";var a=document.createTextNode(t.title),r=document.createElement("a");r.className=s.classNamePrefix+"-object-list-a",r.appendChild(a),o.appendChild(r),e.appendChild(o),this.addObjects(t,o),r.onmouseover=function(){i.chart.rollOverMapObject(t,!1)},r.onmouseout=function(){i.chart.rollOutMapObject(t)},r.onclick=function(){i.chart.clickMapObject(t)}}}});
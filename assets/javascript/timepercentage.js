function pullOutSliceHandler(t){var e=t.dataItem.dataContext.group;chart2.graphs[0].valueField=e,chart2.titles[0].text="% от общего числа в группе "+e,chart2.validateData(),chart2.animateAgain()}function pullInSliceHandler(t){chart2.graphs[0].valueField="all",chart2.titles[0].text="% от общего числа во всех группах",chart2.validateData(),chart2.animateAgain()}function clickGraphItemHandler(t){for(var e=t.graph.valueField,a=t.item.category.split(":"),l=60*a[0]*60*100+60*a[1]*100,r=l+barWidth,i=document.getElementById("data-table");i.firstChild;)i.removeChild(i.firstChild);for(var n=0;n<fullData.length;n++){var d=fullData[n],o=parseInt(d.timemsec);if((d.class===e||"all"===e)&&o>=l&&r>o){var c=document.createElement("tr");c.innerHTML="<td>"+d.name+"</td><td>"+d.time+"</td><td>"+d.date+"</td><td>"+d.source.replace(",",", ")+"</td><td>"+d.target.replace(",",", ")+"</td>",i.appendChild(c)}}$("#data-popup.ui.modal").modal("show")}var chart=AmCharts.makeChart("chart-pie-timepercentage",{type:"pie",startAngle:200,startDuration:.2,startEffect:"easeOutSine",dataProvider:pieAllGroup,valueField:"count",titleField:"group",labelText:"[[group]]",balloonText:"Возрастная группа [[group]]<br> [[value]]  чел. ([[percents]]%)",pullOutOnlyOne:!0}),chart2=AmCharts.makeChart("chart-timepetcentage",{type:"serial",theme:"none",colors:["#525263"],titles:[{}],dataProvider:timePercentages,startDuration:.2,startEffect:"easeOutSine",graphs:[{title:"%",type:"column",fillAlphas:.8,columnWidth:.97,balloonText:"%% доля атлетов в отрезок времени <strong>[[tStart]] - [[tEnd]]</strong>: [[value]] % в группе"},{title:"кол-во",dashLengthField:"dashLengthColumn",type:"smoothedLine",lineThickness:3,balloonText:"[[value]] %",valueField:"all"}],categoryField:"tStart",categoryAxis:{gridPosition:"start",autoGridCount:!0,labelOffset:5,labelRotation:45,tickPosition:"start"},valueAxes:[{unit:"%",title:"% от суммы по группе",integersOnly:!0,tickLength:0}],chartCursor:{cursorAlpha:0,cursorPosition:"mouse",zoomable:!0}});pullInSliceHandler(),chart.addListener("pullOutSlice",pullOutSliceHandler),chart.addListener("pullInSlice",pullInSliceHandler),chart2.addListener("clickGraphItem",clickGraphItemHandler);